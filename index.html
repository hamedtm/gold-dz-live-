<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø°Ù‡Ø¨ - GOLD DZ LIVE</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #ffd700; --dark-gold: #b8860b; --bg: #f4f4f4; --text: #333; --card: #fff; --up: #27ae60; --down: #e74c3c; }
        body.dark-mode { --bg: #0a192f; --text: #fff; --card: #112240; }
        body { font-family: 'Tajawal', sans-serif; background-color: var(--bg); color: var(--text); margin: 0; padding: 15px; transition: 0.3s; text-align: center; }
        .header { background: linear-gradient(135deg, var(--gold), var(--dark-gold)); color: #000; padding: 20px; border-radius: 15px; margin-bottom: 10px; position: relative; }
        .sub-count { font-size: 0.9em; margin-bottom: 20px; color: var(--dark-gold); font-weight: bold; background: var(--card); display: inline-block; padding: 5px 15px; border-radius: 20px; border: 1px solid var(--gold); }
        .price-card { background: var(--card); padding: 15px; border-radius: 12px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; border: 1px solid var(--gold); transition: 0.5s; }
        .value { font-size: 1.2em; font-weight: 800; display: flex; flex-direction: column; align-items: flex-end; }
        .percent { font-size: 0.8em; font-weight: bold; margin-top: 4px; }
        .price-up { border-color: var(--up); box-shadow: 0 0 10px rgba(39, 174, 96, 0.2); }
        .price-down { border-color: var(--down); box-shadow: 0 0 10px rgba(231, 76, 60, 0.2); }
        .text-up { color: var(--up); }
        .text-down { color: var(--down); }
        .alert-box { background: var(--card); border: 2px solid var(--gold); border-radius: 15px; padding: 15px; margin-top: 20px; text-align: right; }
        select, input { width: 100%; padding: 12px; margin: 5px 0 15px 0; border-radius: 8px; border: 1px solid #ccc; font-family: 'Tajawal'; box-sizing: border-box; }
        .btn-alert { background: var(--dark-gold); color: white; border: none; padding: 15px; border-radius: 8px; width: 100%; font-weight: bold; cursor: pointer; }
        .theme-btn { position: absolute; top: 10px; left: 10px; background: rgba(255,255,255,0.3); border: none; border-radius: 5px; padding: 5px; cursor: pointer; }
    </style>
</head>
<body id="mainBody">

    <div class="header">
        <button class="theme-btn" onclick="toggleTheme()">â˜€ï¸/ğŸŒ™</button>
        <h1 id="ayah-trigger" style="cursor:pointer; margin:0;">Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø°Ù‡Ø¨ Ù…Ø¨Ø§Ø´Ø± ğŸ’°</h1>
        <p style="margin: 5px 0;">Ù…Ø²Ø§Ù…Ù†Ø© Ø­ÙŠØ© Ù…Ø¹ Ø¨ÙˆØ±ØµØ© Ø¨ÙŠÙ†Ø§Ù†Øµ</p>
    </div>

    <div class="sub-count">
        ğŸ‘¥ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ† Ø§Ù„Ø¢Ù†: <span id="userCount">1,248</span> Ø¹Ø¶Ùˆ
    </div>

    <div id="prices">
        <div class="price-card" id="card24">
            <span>Ø¹ÙŠØ§Ø± 24:</span>
            <div class="value">
                <span id="g24">...</span>
                <span id="p24" class="percent">0.00%</span>
            </div>
        </div>
        <div class="price-card" id="card21">
            <span>Ø¹ÙŠØ§Ø± 21:</span>
            <div class="value">
                <span id="g21">...</span>
                <span id="p21" class="percent">0.00%</span>
            </div>
        </div>
        <div class="price-card" id="card18">
            <span>Ø¹ÙŠØ§Ø± 18:</span>
            <div class="value">
                <span id="g18">...</span>
                <span id="p18" class="percent">0.00%</span>
            </div>
        </div>
    </div>

    <div class="alert-box">
        <h3>ğŸ”” ØªÙØ¹ÙŠÙ„ ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ©</h3>
        <select id="methodSelect" onchange="toggleInputs()">
            <option value="tg">ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù… (Telegram)</option>
            <option value="mail">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ (Email)</option>
        </select>
        <input type="email" id="userEmail" placeholder="Ø£Ø¯Ø®Ù„ Ø¥ÙŠÙ…ÙŠÙ„Ùƒ Ù‡Ù†Ø§" style="display:none;">
        <input type="number" id="percentageInput" placeholder="Ù†Ø¨Ù‡Ù†ÙŠ Ø¹Ù†Ø¯ ØªØºÙŠØ± Ø§Ù„Ø³Ø¹Ø± Ø¨Ù†Ø³Ø¨Ø© %">
        <button class="btn-alert" onclick="confirmSubscription()">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ âœ…</button>
    </div>

    <script>
        Telegram.WebApp.ready();
        emailjs.init("vFHwfkXDe3GRCujAa");

        function connectBinance() {
            const ws = new WebSocket('wss://stream.binance.com:9443/ws/paxgusdt@ticker');
            ws.onmessage = (e) => {
                const data = JSON.parse(e.data);
                const price = parseFloat(data.c);
                const changeP = parseFloat(data.P);
                const p24 = (price / 31.1034) * 245;
                updateUI(Math.round(p24), changeP);
            };
            ws.onclose = () => setTimeout(connectBinance, 2000);
        }

        function updateUI(price, percent) {
            const ids = ['24', '21', '18'];
            const factors = [1, 0.875, 0.75];
            const colorClass = percent >= 0 ? 'text-up' : 'text-down';
            const cardClass = percent >= 0 ? 'price-up' : 'price-down';
            const sign = percent >= 0 ? '+' : '';

            ids.forEach((id, index) => {
                const val = Math.round(price * factors[index]);
                document.getElementById('g' + id).innerText = val.toLocaleString() + " Ø¯Ø¬";
                const pElem = document.getElementById('p' + id);
                pElem.innerText = sign + percent.toFixed(2) + "%";
                pElem.className = 'percent ' + colorClass;
                document.getElementById('card' + id).className = 'price-card ' + cardClass;
            });
        }

        connectBinance();
        function toggleInputs() { document.getElementById('userEmail').style.display = (document.getElementById('methodSelect').value === 'mail') ? 'block' : 'none'; }
        function toggleTheme() { document.getElementById('mainBody').classList.toggle('dark-mode'); }
        
        function confirmSubscription() {
            const email = document.getElementById('userEmail').value;
            const percent = document.getElementById('percentageInput').value;
            if(!percent) return alert("Ø£Ø¯Ø®Ù„ Ø§Ù„Ù†Ø³Ø¨Ø©!");
            Telegram.WebApp.showAlert("âœ… ØªÙ… ØªÙØ¹ÙŠÙ„ ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ù€ " + percent + "% Ø¨Ù†Ø¬Ø§Ø­!");
        }
    </script>
</body>
</html>
